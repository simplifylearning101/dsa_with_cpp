# Solutions to Homework Problems

1. **Trapped Rain Water**
```cpp
#include <iostream>
int trapRainWater(int height[], int n) {
    if (n <= 2) return 0;
    int left = 0, right = n - 1, leftMax = 0, rightMax = 0, water = 0;
    while (left < right) {
        if (height[left] < height[right]) {
            if (height[left] >= leftMax) leftMax = height[left];
            else water += leftMax - height[left];
            left++;
        } else {
            if (height[right] >= rightMax) rightMax = height[right];
            else water += rightMax - height[right];
            right--;
        }
    }
    return water;
}
int main() {
    int height[] = {0, 1, 0, 2, 1, 0, 1, 3, 2, 1, 2, 1};
    std::cout << trapRainWater(height, 12) << std::endl; // Output: 6
    return 0;
}
```

2. **Subarray with Given Sum**
```cpp
#include <iostream>
#include <unordered_map>
std::vector<int> subarraySum(int arr[], int n, int k) {
    std::unordered_map<int, int> map;
    map[0] = -1;
    int sum = 0;
    for (int i = 0; i < n; i++) {
        sum += arr[i];
        if (map.find(sum - k) != map.end()) {
            return {map[sum - k] + 1, i};
        }
        map[sum] = i;
    }
    return {};
}
int main() {
    int arr[] = {15, 2, 4, 8, 9, 5, 10, 23};
    auto res = subarraySum(arr, 8, 23);
    for (int x : res) std::cout << x << " "; // Output: 1 2
    std::cout << std::endl;
    return 0;
}
```

3. **Longest Valid Parentheses**
```cpp
#include <iostream>
#include <stack>
int longestValidParentheses(std::string s) {
    std::stack<int> stack;
    stack.push(-1);
    int maxLen = 0;
    for (int i = 0; i < s.size(); i++) {
        if (s[i] == '(') stack.push(i);
        else {
            stack.pop();
            if (stack.empty()) stack.push(i);
            else maxLen = std::max(maxLen, i - stack.top());
        }
    }
    return maxLen;
}
int main() {
    std::cout << longestValidParentheses("(()())") << std::endl; // Output: 6
    return 0;
}
```

4. **Container with Most Water**
```cpp
#include <iostream>
int maxArea(int height[], int n) {
    int maxWater = 0, left = 0, right = n - 1;
    while (left < right) {
        int water = std::min(height[left], height[right]) * (right - left);
        maxWater = std::max(maxWater, water);
        if (height[left] < height[right]) left++;
        else right--;
    }
    return maxWater;
}
int main() {
    int height[] = {1, 8, 6, 2, 5, 4, 8, 3, 7};
    std::cout << maxArea(height, 9) << std::endl; // Output: 49
    return 0;
}
```

5. **Maximum Sum Circular Subarray**
```cpp
#include <iostream>
int maxSubarraySumCircular(int arr[], int n) {
    int maxStraight = arr[0], currMax = arr[0];
    int minStraight = arr[0], currMin = arr[0], total = arr[0];
    for (int i = 1; i < n; i++) {
        currMax = std::max(arr[i], currMax + arr[i]);
        maxStraight = std::max(maxStraight, currMax);
        currMin = std::min(arr[i], currMin + arr[i]);
        minStraight = std::min(minStraight, currMin);
        total += arr[i];
    }
    if (maxStraight < 0) return maxStraight;
    return std::max(maxStraight, total - minStraight);
}
int main() {
    int arr[] = {1, -2, 3, -2};
    std::cout << maxSubarraySumCircular(arr, 4) << std::endl; // Output: 3
    return 0;
}
```

6. **Subarray with Equal 0s and 1s**
```cpp
#include <iostream>
#include <unordered_map>
int findMaxLength(int arr[], int n) {
    std::unordered_map<int, int> map;
    map[0] = -1;
    int sum = 0, maxLen = 0;
    for (int i = 0; i < n; i++) {
        sum += (arr[i] == 0 ? -1 : 1);
        if (map.find(sum) != map.end()) {
            maxLen = std::max(maxLen, i - map[sum]);
        } else {
            map[sum] = i;
        }
    }
    return maxLen;
}
int main() {
    int arr[] = {0, 1, 0, 1};
    std::cout << findMaxLength(arr, 4) << std::endl; // Output: 4
    return 0;
}
```

7. **Maximum Points from Cards**
```cpp
#include <iostream>
int maxScore(int arr[], int n, int k) {
    int sum = 0;
    for (int i = 0; i < k; i++) sum += arr[i];
    int maxSum = sum;
    for (int i = 0; i < k; i++) {
        sum = sum - arr[k - 1 - i] + arr[n - 1 - i];
        maxSum = std::max(maxSum, sum);
    }
    return maxSum;
}
int main() {
    int arr[] = {1, 2, 3, 4, 5, 6, 1};
    std::cout << maxScore(arr, 7, 3) << std::endl; // Output: 12
    return 0;
}
```

8. **Longest Subarray with Equal Elements After Removing One**
```cpp
#include <iostream>
#include <unordered_map>
int longestEqualSubarray(int arr[], int n) {
    std::unordered_map<int, std::vector<int>> map;
    for (int i = 0; i < n; i++) map[arr[i]].push_back(i);
    int maxLen = 0;
    for (auto& [num, indices] : map) {
        for (int i = 1; i < indices.size(); i++) {
            int gap = indices[i] - indices[i - 1] - 1;
            if (gap <= 1) {
                int len = indices[i] - indices[0] + 1;
                maxLen = std::max(maxLen, len - (i - (gap == 1)));
            }
        }
    }
    return maxLen;
}
int main() {
    int arr[] = {1, 1, 2, 1, 1};
    std::cout << longestEqualSubarray(arr, 5) << std::endl; // Output: 4
    return 0;
}
```

9. **Maximum Sum of Two Non-Overlapping Subarrays**
```cpp
#include <iostream>
int maxSumTwoNoOverlap(int arr[], int n, int firstLen, int secondLen) {
    std::vector<int> prefix(n + 1, 0);
    for (int i = 0; i < n; i++) prefix[i + 1] = prefix[i] + arr[i];
    int maxSum = 0;
    for (int i = firstLen; i <= n; i++) {
        int first = prefix[i] - prefix[i - firstLen];
        for (int j = secondLen; j <= n; j++) {
            if (j <= i - firstLen || j >= i + secondLen) {
                int second = prefix[j] - prefix[j - secondLen];
                maxSum = std::max(maxSum, first + second);
            }
        }
    }
    return maxSum;
}
int main() {
    int arr[] = {0, 6, 5, 2, 2, 5, 1, 9, 4};
    std::cout << maxSumTwoNoOverlap(arr, 9, 1, 2) << std::endl; // Output: 20
    return 0;
}
```

10. **Number of Subarrays with Odd Sum**
```cpp
#include <iostream>
#include <vector>
int numOfSubarrays(int arr[], int n) {
    const int MOD = 1e9 + 7;
    std::vector<int> count(2, 0);
    count[0] = 1; // Empty subarray has even sum (0)
    int sum = 0, result = 0;
    for (int i = 0; i < n; i++) {
        sum += arr[i];
        int parity = sum % 2;
        result = (result + count[1 - parity]) % MOD;
        count[parity]++;
    }
    return result;
}
int main() {
    int arr[] = {1, 3, 5};
    std::cout << numOfSubarrays(arr, 3) << std::endl; // Output: 4
    return 0;
}
```