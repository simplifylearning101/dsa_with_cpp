# Solutions to Homework Problems

1. **Maximum sum of k consecutive elements**
```cpp
#include <iostream>
int maxSumK(int arr[], int n, int k) {
    if (k > n) return 0;
    int sum = 0;
    for (int i = 0; i < k; i++) sum += arr[i];
    int maxSum = sum;
    for (int i = k; i < n; i++) {
        sum += arr[i] - arr[i - k];
        maxSum = std::max(maxSum, sum);
    }
    return maxSum;
}
int main() {
    int arr[] = {1, 4, 2, 10, 2, 3, 1, 0, 20};
    std::cout << maxSumK(arr, 9, 4) << std::endl; // Output: 24
    return 0;
}
```

2. **Longest subarray with sum <= k**
```cpp
#include <iostream>
int longestSubarray(int arr[], int n, int k) {
    int sum = 0, maxLen = 0, left = 0;
    for (int right = 0; right < n; right++) {
        sum += arr[right];
        while (sum > k && left <= right) sum -= arr[left++];
        maxLen = std::max(maxLen, right - left + 1);
    }
    return maxLen;
}
int main() {
    int arr[] = {1, 2, 3, 4};
    std::cout << longestSubarray(arr, 4, 5) << std::endl; // Output: 2
    return 0;
}
```

3. **Maximum subarray sum (Kadaneâ€™s)**
```cpp
#include <iostream>
int maxSubArray(int arr[], int n) {
    int maxSum = arr[0], currSum = arr[0];
    for (int i = 1; i < n; i++) {
        currSum = std::max(arr[i], currSum + arr[i]);
        maxSum = std::max(maxSum, currSum);
    }
    return maxSum;
}
int main() {
    int arr[] = {-2, 1, -3, 4, -1, 2, 1, -5, 4};
    std::cout << maxSubArray(arr, 9) << std::endl; // Output: 6
    return 0;
}
```

4. **Range sum queries using prefix sums**
```cpp
#include <iostream>
#include <vector>
std::vector<int> prefixSum(int arr[], int n) {
    std::vector<int> prefix(n + 1, 0);
    for (int i = 0; i < n; i++) prefix[i + 1] = prefix[i] + arr[i];
    return prefix;
}
int rangeSum(int arr[], int n, int left, int right) {
    auto prefix = prefixSum(arr, n);
    return prefix[right + 1] - prefix[left];
}
int main() {
    int arr[] = {1, 2, 3, 4, 5};
    std::cout << rangeSum(arr, 5, 1, 3) << std::endl; // Output: 9
    return 0;
}
```

5. **Smallest subarray with sum >= k**
```cpp
#include <iostream>
int smallestSubarray(int arr[], int n, int k) {
    int sum = 0, minLen = n + 1, left = 0;
    for (int right = 0; right < n; right++) {
        sum += arr[right];
        while (sum >= k && left <= right) {
            minLen = std::min(minLen, right - left + 1);
            sum -= arr[left++];
        }
    }
    return minLen > n ? -1 : minLen;
}
int main() {
    int arr[] = {2, 3, 1, 2, 4, 3};
    std::cout << smallestSubarray(arr, 6, 7) << std::endl; // Output: 2
    return 0;
}
```

6. **Count subarrays with sum equal to k**
```cpp
#include <iostream>
#include <unordered_map>
int subarraySum(int arr[], int n, int k) {
    std::unordered_map<int, int> map;
    map[0] = 1;
    int sum = 0, count = 0;
    for (int i = 0; i < n; i++) {
        sum += arr[i];
        if (map.find(sum - k) != map.end()) count += map[sum - k];
        map[sum]++;
    }
    return count;
}
int main() {
    int arr[] = {1, 1, 1};
    std::cout << subarraySum(arr, 3, 2) << std::endl; // Output: 2
    return 0;
}
```

7. **Longest substring with at most k distinct characters**
```cpp
#include <iostream>
#include <unordered_map>
int lengthOfLongestSubstringKDistinct(std::string s, int k) {
    std::unordered_map<char, int> map;
    int left = 0, maxLen = 0;
    for (int right = 0; right < s.size(); right++) {
        map[s[right]]++;
        while (map.size() > k) {
            map[s[left]]--;
            if (map[s[left]] == 0) map.erase(s[left]);
            left++;
        }
        maxLen = std::max(maxLen, right - left + 1);
    }
    return maxLen;
}
int main() {
    std::cout << lengthOfLongestSubstringKDistinct("eceba", 2) << std::endl; // Output: 3
    return 0;
}
```

8. **Rotate an array by k positions**
```cpp
#include <iostream>
#include <algorithm>
void rotate(int arr[], int n, int k) {
    k %= n;
    std::reverse(arr, arr + n);
    std::reverse(arr, arr + k);
    std::reverse(arr + k, arr + n);
}
int main() {
    int arr[] = {1, 2, 3, 4, 5, 6, 7};
    rotate(arr, 7, 3);
    for (int i = 0; i < 7; i++) {
        std::cout << arr[i] << " "; // Output: 5 6 7 1 2 3 4
    }
    std::cout << std::endl;
    return 0;
}
```

9. **Maximum product subarray**
```cpp
#include <iostream>
int maxProduct(int arr[], int n) {
    int maxProd = arr[0], currMax = arr[0], currMin = arr[0];
    for (int i = 1; i < n; i++) {
        int temp = currMax;
        currMax = std::max({arr[i], currMax * arr[i], currMin * arr[i]});
        currMin = std::min({arr[i], temp * arr[i], currMin * arr[i]});
        maxProd = std::max(maxProd, currMax);
    }
    return maxProd;
}
int main() {
    int arr[] = {2, 3, -2, 4};
    std::cout << maxProduct(arr, 4) << std::endl; // Output: 6
    return 0;
}
```

10. **Number of subarrays with product less than k**
```cpp
#include <iostream>
int numSubarrayProductLessThanK(int arr[], int n, int k) {
    if (k <= 1) return 0;
    int prod = 1, count = 0, left = 0;
    for (int right = 0; right < n; right++) {
        prod *= arr[right];
        while (prod >= k && left <= right) prod /= arr[left++];
        count += right - left + 1;
    }
    return count;
}
int main() {
    int arr[] = {10, 5, 2, 6};
    std::cout << numSubarrayProductLessThanK(arr, 4, 100) << std::endl; // Output: 8
    return 0;
}
```